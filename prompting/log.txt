Log

Date: 2024-07-25

Today's session focused on implementing a comprehensive gesture-based control system and improving the overall user experience.

Advances:
1.  **Gesture Lexicon Implementation**: A full set of hand gestures has been integrated to control the main modeling functions. The system now recognizes touches between the thumb and other fingers on both hands.

2.  **Right-Hand Commands**:
    *   **Deformation (Thumb + Index)**: Activates mesh deformation. This is now weighted to only be influenced by the thumb and index fingertips for more precise control.
    *   **Camera Orbit (Thumb + Middle/Ring)**: The camera now orbits around the central mesh on the Z-axis (middle finger) or Y-axis (ring finger), providing a more intuitive inspection experience. This replaces the previous object-centric rotation.
    *   **Cube Creation (Thumb + Pinky)**: Allows the user to dynamically create a cube primitive. The cube is finalized and merged with the main mesh upon gesture release.

3.  **Left-Hand Commands**:
    *   **Camera Reset (Thumb + Index)**: A new "home" button functionality. Holding this gesture for one second resets the camera to its initial position, preventing disorientation.

4.  **User Experience Enhancements**:
    *   **Flicker Correction**: Eliminated the flickering of fingertip markers by moving them to a distant location instead of toggling their visibility.
    *   **Gesture Hold Mechanism**: Implemented a one-second hold requirement for the camera reset gesture to prevent accidental activation.
    *   **Blender UI Panel**: Added a dedicated "CONJURE" panel in the Blender UI to cleanly initiate and finalize the script, removing the need to manually stop it.
    *   **Coordinate Mapping Scale**: Introduced configurable scaling factors (X, Y, Z) for hand mapping, allowing for fine-tuning of gesture sensitivity.

5.  **Code & Stability**:
    *   Refactored Blender script to correctly register and handle custom properties, resolving `AttributeError` tracebacks.
    *   Resolved `ModuleNotFoundError` for the `mediapipe` library by adjusting import statements for better environment compatibility. 

---
Date: 2024-07-25 (Afternoon Session)

Focus shifted to refining the sculpting experience, adding more advanced and intuitive user controls.

Advances:
1.  **Physics-Based Deformation**:
    *   **Volume Preservation**: Implemented a system to maintain the mesh's volume during deformation, preventing the "deflated balloon" effect and making the object feel solid.
    *   **Viscosity & Damping**: Added a velocity-based physics model. The mesh now has a sense of momentum and viscosity, making the sculpting feel more natural and less like manipulating a static set of points.
    *   **Parameter Tuning**: Refined force and damping parameters to prevent simulation explosion and provide a stable, controllable sculpting feel.

2.  **Rewind Functionality**:
    *   Replaced the "Create Cube" gesture (Right Thumb + Pinky) with a much more useful **"Rewind"** feature.
    *   The system now keeps a history of mesh states, allowing the user to step back through their modifications instantly.

3.  **Sculpting Brush System**:
    *   Introduced a multi-brush system to move beyond simple pinching.
    *   **New Gesture**: The Left Thumb + Middle Finger gesture now cycles through the available brushes.
    *   **Brush Types**: Implemented three distinct brushes:
        *   `PINCH`: The original behavior, pulls vertices towards the fingers.
        *   `GRAB`: Moves the affected vertices along with the hand's movement.
        *   `SMOOTH`: Averages vertices to soften and blend the mesh.
    *   **UI Feedback**: Added an on-screen text display in the Blender viewport to show the currently active brush.

4.  **Bug Fixes & Stability**:
    *   Resolved multiple `bmesh` tracebacks (`AttributeError: invalid key` and `IndexError: outdated internal index table`) by ensuring correct vertex indexing and lookup table management. 